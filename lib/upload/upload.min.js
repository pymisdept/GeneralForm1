$(function(){$("#btnFileUpload").fileupload({url:"FileUploadHandler.ashx?upload=start",add:function(e,i){var a=!0,l="",r=i.originalFiles[0].name.replace(/^.*\./,""),s=i.originalFiles[0].size;if("jpg"!=(r=r.toLowerCase())&&"jpeg"!=r&&"png"!=r&&"pdf"!=r&&"doc"!=r&&"docx"!=r&&(l="檔案的格式不正確 Invalid File Format",a=!1),s>10485760&&(""!=l?l+="\n每個上載檔案不得超過10MB Each file size must not exceed 10MB":l="每個上載檔案不得超過10MB Each file size must not exceed 10MB",a=!1),$("#upFileH").val().split("*").length>=5&&(""!=l?l+="\n最多只可以上載5個檔案 The maximum number of files that can be uploaded is 5":l="最多只可以上載5個檔案 The maximum number of files that can be uploaded is 5",a=!1),!a)return alert(l),!1;$("#progressbar").show(),i.submit()},success:function(e,i){$("#progressbar").hide(),str=JSON.parse(e);var a=str.fi+"|"+str.fn+"|"+str.fl;$("#mygroup").append("<div id='"+str.fi.split(".")[0]+"' class='col-12 row subrow'><div class='col-6'>"+str.fn+"</div><div class='col-3'>"+str.fl+"</div><div class='rmFRow col-3'><a href='#'>Delete</a></div></div>");var l=$("#upFileH").val();""==l?(l=a,$("#upFileH").attr("value",l)):(l=l+"*"+a,$("#upFileH").attr("value",l))},error:function(e){$("#progressbar").hide()}}),$("body").on("click",".rmFRow",function(e){var i=$(this).parents(".subrow"),a="",l=$("#upFileH").val().split("*"),r=i.attr("id");for(k=0;k<l.length;k++)l[k].indexOf(r)>=0||(a=""==a?l[k]:a+"*"+l[k]);$("#upFileH").attr("value",a),i.fadeOut(100,function(){$(this).remove()})})});